{"version":3,"file":"index-cef3844c.js","sources":["../../../src/renderer/components/inspector/InspectorWrapper.tsx","../../../src/renderer/pages/404/NotFound.tsx","../../../src/renderer/assets/svgs/react.svg","../../../src/renderer/assets/svgs/vite.svg","../../../src/renderer/components/vite-react-show-area/ViteReactShowArea.tsx","../../../src/renderer/pages/home/Home.tsx","../../../src/renderer/routes/routes-config.tsx","../../../src/renderer/store/models/global/reducers.ts","../../../src/renderer/store/models/global/effects.ts","../../../src/renderer/store/models/global/index.ts","../../../src/renderer/store/models/login/index.ts","../../../src/renderer/store/models/index.ts","../../../src/renderer/store/index.ts","../../../src/renderer/main.tsx"],"sourcesContent":["import React, { useCallback } from 'react';\nimport { Inspector } from 'react-dev-inspector';\n\nexport const InspectorWrapper = ({ children }) => {\n  // console.log('import.meta.env: ', import.meta.env);\n  if (!import.meta.env.DEV) {\n    return <>{children}</>;\n  }\n\n  // 打开编辑器\n  const launchEditor = useCallback(({ filePath, lineNumber, columnNumber }) => {\n    if (!filePath) {\n      return;\n    }\n\n    let urlScheme = '';\n    // 默认使用 vscode\n    // PUBLIC_REACT_DEV_INSPECTOR_LAUNCH_EDITOR 建议放到 .env.development.local 文件中维护\n    const REACT_DEV_INSPECTOR_LAUNCH_EDITOR =\n      import.meta.env.PUBLIC_REACT_DEV_INSPECTOR_LAUNCH_EDITOR || 'vscode';\n\n    if (REACT_DEV_INSPECTOR_LAUNCH_EDITOR === 'webstorm') {\n      urlScheme = `webstorm://open?file=${filePath}&line=${lineNumber}&column=${columnNumber}`;\n    } else if (REACT_DEV_INSPECTOR_LAUNCH_EDITOR === 'vscode') {\n      urlScheme = `vscode://file/${filePath}:${lineNumber}:${columnNumber}`;\n    }\n\n    if (urlScheme) {\n      window.open(urlScheme, '_self');\n    }\n  }, []);\n\n  const handleElementClick = useCallback(({ codeInfo }) => {\n    // console.log('codeInfo: ', codeInfo);\n\n    if (!codeInfo) return;\n\n    try {\n      const { absolutePath, lineNumber, columnNumber } = codeInfo;\n\n      if (!absolutePath) {\n        return;\n      }\n      launchEditor({ filePath: absolutePath, lineNumber, columnNumber });\n    } catch (e) {\n      console.log('Inspector Error =>', e);\n    }\n  }, []);\n\n  return (\n    <Inspector\n      // 快捷键配置\n      keys={['option', 'c']}\n      // true: 禁止启动编辑器打开文件（使用场景：只是查看元素的位置信息，不进行跳转 | 想要自定义编辑器跳转行为）\n      disableLaunchEditor\n      onClickElement={handleElementClick}\n    >\n      {children}\n    </Inspector>\n  );\n};\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nconst NotFoundContainer = () => {\n  return (\n    <div>\n      <h2>404</h2>\n      <Link to=\"/home\">To Home</Link>\n    </div>\n  );\n};\n\nexport default NotFoundContainer;\n","export default \"__VITE_ASSET__5457546b__\"","export default \"__VITE_ASSET__24400c48__\"","/**\n * @description：\n */\nimport reactLogo from '@renderer/assets/svgs/react.svg';\nimport viteLogo from '@renderer/assets/svgs/vite.svg';\nimport React from 'react';\n\ninterface ViteReactShowAreaProps {\n  [props: string]: any;\n}\n\nconst ViteReactShowArea = (props: ViteReactShowAreaProps) => {\n  // eslint-disable-next-line no-empty-pattern\n  const {} = props;\n  return (\n    <div style={{ border: '1px solid red', padding: 20 }}>\n      <div>\n        <a\n          href=\"https://vitejs.dev\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          <img\n            src={viteLogo}\n            className=\"logo\"\n            alt=\"Vite logo\"\n          />\n        </a>\n        <a\n          href=\"https://reactjs.org\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          <img\n            src={reactLogo}\n            className=\"logo react\"\n            alt=\"React logo\"\n          />\n        </a>\n      </div>\n      <h1>Vite + React</h1>\n      <p className=\"read-the-docs\">Click on the Vite and React logos to learn more</p>\n    </div>\n  );\n};\n\nexport default ViteReactShowArea;\n","import styles from './home.module.less';\n\nimport ViteReactShowArea from '@renderer/components/vite-react-show-area/ViteReactShowArea';\nimport { RootDispatch, RootState } from '@renderer/store';\nimport { Button } from 'antd';\nimport React, { useEffect, useState } from 'react';\n// import history from '@renderer/store/history';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useNavigate } from 'react-router';\nimport { Link, Outlet } from 'react-router-dom';\n\nconst HomeContainer = () => {\n  const [count, setCount] = useState(0);\n\n  const countState = useSelector((state: RootState) => state.global.count);\n\n  console.log(countState);\n\n  const dispatch = useDispatch<RootDispatch>();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    dispatch.global.incrementAsync(1);\n  }, []);\n\n  return (\n    <div className={styles.container}>\n      <h2>HomeContainer</h2>\n      <ViteReactShowArea />\n      <div className=\"card\">\n        <Button onClick={() => setCount((count) => count + 1)}>count is {count}</Button>\n      </div>\n\n      <div>\n        <div>\n          {/* <Link to=\"/register\">To Register</Link> */}\n          <div\n            onClick={() => {\n              // history.push('/register')\n              // 必须用 navigate 跳转路由，而不是 history.push\n              navigate('/register');\n            }}\n          >\n            To Register 222\n          </div>\n        </div>\n        <div>\n          <Link to=\"/login\">To Login</Link>\n        </div>\n        <div>\n          <Link to=\"/user\">To User</Link>\n        </div>\n      </div>\n    </div>\n  );\n};\nexport default HomeContainer;\n","/**\n * @description：路由配置文件\n */\nimport React from 'react';\nimport { cloneDeep } from 'lodash-es';\nimport NotFoundContainer from '@renderer/pages/404/NotFound';\nimport HomeContainer from '@renderer/pages/home/Home';\n\nfunction LazyElement(props: any) {\n  const { importFunc } = props;\n  const LazyComponent = React.lazy(importFunc);\n\n  return (\n    <React.Suspense fallback={'loading...'}>\n      <LazyComponent />\n    </React.Suspense>\n  );\n}\n\n// 处理 routes 如果 element 是懒加载，要包裹 Suspense\nfunction dealRoutes(routesArr) {\n  if (!Array.isArray(routesArr) || !routesArr.length) {\n    return [];\n  }\n\n  const clonedArr = cloneDeep(routesArr);\n  clonedArr.forEach((route) => {\n    const { component } = route;\n    route.element = component;\n\n    if (typeof component == 'function') {\n      route.element = <LazyElement importFunc={component} />;\n    }\n\n    delete route.component;\n\n    if (route.children) {\n      route.children = dealRoutes(route.children);\n    }\n  });\n\n  return clonedArr;\n}\n\n// 原始路由配置\nexport const rawRoutesConfig = [\n  {\n    path: '/',\n    component: () => import('@renderer/App'),\n    children: [\n      // 一旦解开下面的注释代码，默认路由就会优先渲染 register，布局路由里设置的默认路由就会失效\n      // {\n      //   index: true,\n      //   component: () => import('@renderer/pages/register/Register'),\n      // },\n      {\n        component: () => import('@renderer/components/common-layout/CommonLayout'),\n        children: [\n          {\n            // index route 不能有 children、path 属性\n            // 在布局路由下的子路由，想要设置为默认路由，必须在布局路由下配置，不能跳出布局路由外单独设置，否则只会渲染子路由内容，布局路由不会渲染出来\n            index: true,\n            component: <HomeContainer />,\n          },\n          {\n            path: 'home',\n            component: <HomeContainer />,\n          },\n          {\n            path: 'user',\n            component: () => import('@renderer/pages/user/User'),\n          },\n        ],\n      },\n      {\n        path: 'register',\n        component: () => import('@renderer/pages/register/Register'),\n      },\n      {\n        path: 'login',\n        component: () => import('@renderer/pages/login/Login'),\n      },\n    ],\n  },\n\n  {\n    path: '*',\n    component: <NotFoundContainer />,\n  },\n];\n\nexport const routesConfig = dealRoutes(rawRoutesConfig);\n","import { GlobalStateDeclaration } from '@renderer/store/models/global/index';\n\nexport default {\n  updateList(state) {\n    // mutable changes to the state\n    state.push({ todo: 'Tweet about it', done: false });\n    state[1].done = true;\n  },\n  increment: (state: GlobalStateDeclaration, payload: number): GlobalStateDeclaration => {\n    state.count += payload;\n    return state;\n  },\n};\n","import { RootDispatch } from '@renderer/store';\n\nconst effects = (dispatch: RootDispatch) => ({\n  async incrementAsync(payload: number, rootState) {\n    await new Promise((resolve) => setTimeout(resolve, 1000));\n    dispatch.global.increment(payload);\n  },\n});\n\nexport default effects;\n","/**\n * 如果一个模块中的 model 体积很大时，可以考虑将其拆分成一个个文件（action-types、effects、reducers）\n */\nimport { createModel } from '@rematch/core';\nimport { RootModel } from '../index';\nimport reducers from './reducers';\nimport effects from './effects';\n\nexport interface GlobalStateDeclaration {\n  projectName?: string;\n  count: number;\n  list: any[];\n}\n\nconst state: GlobalStateDeclaration = {\n  projectName: 'vite-react-ts-app',\n  count: 0,\n  list: [\n    {\n      todo: 'Learn typescript',\n      done: true,\n    },\n    {\n      todo: 'Try immer',\n      done: false,\n    },\n  ],\n};\n\nexport default createModel<RootModel>()({\n  name: 'global',\n  state,\n  reducers,\n  effects,\n});\n\n","import { createModel } from '@rematch/core';\nimport { RootModel } from '../index';\n\nexport interface LoginStateDeclaration {\n  pageName?: string;\n  count: number;\n}\n\nconst state: LoginStateDeclaration = {\n  pageName: 'login',\n  count: 0,\n};\n\nexport default createModel<RootModel>()({\n  name: 'login',\n  state,\n  reducers: {\n    increment: (state: LoginStateDeclaration, payload: number): LoginStateDeclaration => {\n      state.count += payload;\n      return state;\n    },\n  },\n  effects: (dispatch) => ({\n    async incrementAsync(payload: number, rootState) {\n      await new Promise((resolve) => setTimeout(resolve, 1000));\n      dispatch.login.increment(payload);\n    },\n  }),\n});\n","import { Models } from \"@rematch/core\";\n\nimport globalModel from \"./global\";\nimport loginModel from \"./login\";\n\nexport interface RootModel extends Models<RootModel> {\n  login: typeof loginModel;\n  // @ts-ignore\n  global: typeof globalModel;\n}\n\nexport const models: RootModel = { login: loginModel, global: globalModel };\n","import { init, RematchDispatch, RematchRootState } from '@rematch/core';\nimport immerPlugin from '@rematch/immer';\nimport loadingPlugin, { ExtraModelsFromLoading } from '@rematch/loading';\nimport { models, RootModel } from './models';\n\ntype FullModel = ExtraModelsFromLoading<RootModel>\n\nexport type Store = typeof store;\nexport type RootState = RematchRootState<RootModel>;\nexport type RootDispatch = RematchDispatch<RootModel>;\n\n// https://rematchjs.org/docs/recipes/redux-plugins/\nconst store = init<RootModel, FullModel>({\n  models,\n  plugins: [immerPlugin(), loadingPlugin()],\n  redux: {\n    // devtoolOptions: {\n    // 禁用 redux devtools\n    //   disabled: true,\n    // },\n  },\n});\n\nexport default store;\n","// 不要全局引入该样式，请通过按需加载的方式引入\n// import 'antd/dist/antd.css';\nimport './index.less';\n\nimport { InspectorWrapper } from '@renderer/components/inspector/InspectorWrapper';\nimport { routesConfig } from '@renderer/routes/routes-config';\nimport store from '@renderer/store';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\n\n\nimport { BrowserRouter, HashRouter, useRoutes } from 'react-router-dom';\n\n\nfunction RouteElement() {\n  const element = useRoutes(routesConfig);\n  return element;\n}\n\nfunction RootContainer() {\n  return (\n    <InspectorWrapper>\n      <Provider store={store}>\n        <BrowserRouter>\n          <RouteElement />\n        </BrowserRouter>\n      </Provider>\n    </InspectorWrapper>\n  );\n}\n\nReactDOM.render(<RootContainer />, document.getElementById('root'));\n"],"names":["InspectorWrapper","children","React","NotFoundContainer","Link","reactLogo","viteLogo","ViteReactShowArea","props","HomeContainer","useState","countState","useSelector","state","dispatch","useDispatch","navigate","useNavigate","useEffect","styles","_Button","setCount","count2","count","LazyElement","importFunc","LazyComponent","dealRoutes","routesArr","clonedArr","route","component","rawRoutesConfig","__vitePreload","routesConfig","reducers","payload","effects","rootState","resolve","globalModel","createModel","loginModel","models","store","init","immerPlugin","loadingPlugin","RouteElement","useRoutes","RootContainer","Provider","BrowserRouter"],"mappings":"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"}